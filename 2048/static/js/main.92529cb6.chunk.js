(this.webpackJsonpsimple2048=this.webpackJsonpsimple2048||[]).push([[0],{15:function(e,t,n){e.exports=n(26)},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),o=n.n(i),c=n(14),l=n(2),s=n(3),u=n(4),d=n(6),m=n(5),h=n(7),f=n(8),v=n(9),p=(n(25),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).COLOR_GRADIENT=["#FFFF00","#FFE500","#FFCC00","#FFB200","#FF9900","#FF7F00","#FF6600","#FF4C00","#FF3200","#FF1900","#FF0000"],n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={backgroundColor:this.props.value>0?this.COLOR_GRADIENT[Math.log2(this.props.value)-1]:"#DDDDDD",color:this.props.value>32?"#FFFFFF":"#000000",fontSize:"200%"};return r.a.createElement("span",{className:"square",style:e},this.props.value>0?this.props.value:"")}}]),t}(r.a.Component)),b=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).renderSquare=n.renderSquare.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderSquare",value:function(e,t){return r.a.createElement(p,{value:this.props.board[e][t],key:e*this.props.board.length+t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.board.map((function(t,n){return r.a.createElement("div",{className:"board-row",key:n},t.map((function(t,a){return e.renderSquare(n,a)})))})))}}]),t}(r.a.Component),k=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t={width:this.props.screenLength,height:this.props.screenLength};return 1===this.props.endGame?e="You win!":-1===this.props.endGame&&(e="You lose!"),!!this.props.endGame&&r.a.createElement("div",{className:"game-endgame",style:t},e)}}]),t}(r.a.Component),y=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(f.a,{className:"arrow-key",icon:v.d,size:"7x",onClick:function(){return e.props.clickHandler(1)}})),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(f.a,{className:"arrow-key",icon:v.b,size:"7x",onClick:function(){return e.props.clickHandler(0)}})),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(f.a,{className:"arrow-key",icon:v.c,size:"7x",onClick:function(){return e.props.clickHandler(2)}}))),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(f.a,{className:"arrow-key",icon:v.a,size:"7x",onClick:function(){return e.props.clickHandler(3)}})))))}}]),t}(r.a.Component);function E(e){var t=Math.sqrt(e.length);return new Array(t).fill(0).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function O(e){var t=e.flat();if(!t.includes(0))return E(t);for(var n=[],a=0;a<t.length;a++)0===t[a]&&n.push(a);return t[n[Math.floor(Math.random()*n.length)]]=Math.random()>.75?4:2,E(t)}function w(e,t){t%=4;for(var n=e.length,a=E(e.flat());t>0;){for(var r=0;r<n/2;r++)for(var i=r;i<n-r-1;i++){var o=a[r][i];a[r][i]=a[i][n-r-1],a[i][n-r-1]=a[n-r-1][n-i-1],a[n-r-1][n-i-1]=a[n-i-1][r],a[n-i-1][r]=o}t--}return a}var g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).BOARD_SIZE=4,n.keydown=!1,n.state={board:O(new Array(n.BOARD_SIZE).fill(new Array(n.BOARD_SIZE).fill(0))),endGame:0,inTransit:!1},n.moveHandler=n.moveHandler.bind(Object(l.a)(n)),n.keydownAction=n.keydownAction.bind(Object(l.a)(n)),n.keyupAction=n.keyupAction.bind(Object(l.a)(n)),n.generateSquareAction=n.generateSquareAction.bind(Object(l.a)(n)),n.restart=n.restart.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"moveHandler",value:function(e){if(!this.state.endGame&&!this.state.inTransit){var t=function(e,t){var n=w(e,t);n=w(n=function(e){for(var t=e.length,n=new Array(t),a=0;a<t;a++){for(var r=e[a].filter((function(e){return e>0}));r.length<t;)r.push(0);for(var i=0;i<t-1&&0!==r[i];i++)if(r[i]===r[i+1]){if(r[i]=r[i]+r[i+1],i!==t-2)for(var o=i+1;o<t-1;o++)r[o]=r[o+1];r[t-1]=0}n[a]=r}return n}(n),4-t);var a=function(e,t){for(var n=0;n<e.length;n++)for(var a=0;a<e.length;a++)if(e[n][a]!==t[n][a])return!0;return!1}(e,n);return[n,a]}(this.state.board,e),n=Object(c.a)(t,2),a=n[0],r=n[1];this.setState({board:a,inTransit:r})}}},{key:"keydownAction",value:function(e){if(!this.state.endGame&&!this.state.inTransit&&!this.keydown){this.keydown=!0;var t=e.key,n=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"];n.includes(t)&&this.moveHandler(n.indexOf(t))}}},{key:"keyupAction",value:function(e){this.keydown=!1}},{key:"generateSquareAction",value:function(){var e=O(this.state.board),t=function(e){var t=e.length;if(e.flat().includes(2048))return 1;if(e.flat().includes(0))return 0;for(var n=0;n<t-1;n++){for(var a=0;a<t-1;a++)if(e[n][a]===e[n][a+1]||e[n][a]===e[n+1][a])return 0;if(e[t-1][n]===e[t-1][n+1]||e[n][t-1]===e[n+1][t-1])return 0}return-1}(e);this.setState({board:e,endGame:t,inTransit:!1})}},{key:"restart",value:function(){this.setState({board:O(new Array(this.BOARD_SIZE).fill(new Array(this.BOARD_SIZE).fill(0))),endGame:0,inTransit:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydownAction),document.addEventListener("keyup",this.keyupAction)}},{key:"componentDidUpdate",value:function(){this.state.inTransit&&setTimeout(this.generateSquareAction,350)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydownAction),document.removeEventListener("keyup",this.keyupAction)}},{key:"render",value:function(){var e=100*this.state.board.length+4*(this.state.board.length+1);return r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"game-info"},r.a.createElement("h1",null,"Simple 2048"),r.a.createElement("div",{className:"game-row"},r.a.createElement("div",{className:"game-board"},r.a.createElement(b,{board:this.state.board})),r.a.createElement(k,{endGame:this.state.endGame,screenLength:e}),r.a.createElement("div",{className:"game-control"},r.a.createElement(y,{clickHandler:this.moveHandler}))),r.a.createElement("div",{className:"game-reset"},r.a.createElement("p",null,r.a.createElement("button",{className:"reset-button",onClick:this.restart},"Restart")))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.92529cb6.chunk.js.map